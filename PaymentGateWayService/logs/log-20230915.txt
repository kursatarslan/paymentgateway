{"@t":"2023-09-14T23:07:27.6271250Z","@mt":"Failed to determine the https port for redirect.","@l":"Warning","EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HMTLETEKN76D:00000001","RequestPath":"/api/payment","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:30.4770550Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)","contextType":"PaymentGateWay.Infrastructure.Contexts.ApplicationDbContext","newline":"\n","error":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"1167f238-0ba5-4444-94aa-a779d427c2d1","ActionName":"PaymentGateWayService.Controllers.PaymentController.Post (PaymentGateWayService)","RequestId":"0HMTLETEKN76D:00000001","RequestPath":"/api/payment","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:30.4833450Z","@mt":"An unexpected error occurred.","@l":"Error","@x":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()\n   at PaymentGateWay.Infrastructure.Persistence.PaymentRepository.CreatePayment(PaymentRequest request) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWay.Infrastructure/Persistence/PaymentRepository.cs:line 26\n   at PaymentGateWay.Infrastructure.Services.PaymentService.CreatePayment(PaymentRequest request) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWay.Infrastructure/Services/PaymentService.cs:line 57\n   at PaymentGateWayService.Controllers.PaymentController.Post(PaymentRequest paymentRequest) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWayService/Controllers/PaymentController.cs:line 38","SourceContext":"PaymentGateWayService.Controllers.PaymentController","ActionId":"1167f238-0ba5-4444-94aa-a779d427c2d1","ActionName":"PaymentGateWayService.Controllers.PaymentController.Post (PaymentGateWayService)","RequestId":"0HMTLETEKN76D:00000001","RequestPath":"/api/payment","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:30.5345120Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["2910.6517"],"RequestMethod":"POST","RequestPath":"/api/payment","StatusCode":200,"Elapsed":2910.651708,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMTLETEKN76D:00000001","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:33.5264300Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)","contextType":"PaymentGateWay.Infrastructure.Contexts.ApplicationDbContext","newline":"\n","error":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"1167f238-0ba5-4444-94aa-a779d427c2d1","ActionName":"PaymentGateWayService.Controllers.PaymentController.Post (PaymentGateWayService)","RequestId":"0HMTLETEKN76D:00000002","RequestPath":"/api/payment","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:33.5326850Z","@mt":"An unexpected error occurred.","@l":"Error","@x":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()\n   at PaymentGateWay.Infrastructure.Persistence.PaymentRepository.CreatePayment(PaymentRequest request) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWay.Infrastructure/Persistence/PaymentRepository.cs:line 26\n   at PaymentGateWay.Infrastructure.Services.PaymentService.CreatePayment(PaymentRequest request) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWay.Infrastructure/Services/PaymentService.cs:line 57\n   at PaymentGateWayService.Controllers.PaymentController.Post(PaymentRequest paymentRequest) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWayService/Controllers/PaymentController.cs:line 38","SourceContext":"PaymentGateWayService.Controllers.PaymentController","ActionId":"1167f238-0ba5-4444-94aa-a779d427c2d1","ActionName":"PaymentGateWayService.Controllers.PaymentController.Post (PaymentGateWayService)","RequestId":"0HMTLETEKN76D:00000002","RequestPath":"/api/payment","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:33.5379410Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["119.9370"],"RequestMethod":"POST","RequestPath":"/api/payment","StatusCode":200,"Elapsed":119.936958,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMTLETEKN76D:00000002","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:34.6690330Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)","contextType":"PaymentGateWay.Infrastructure.Contexts.ApplicationDbContext","newline":"\n","error":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"1167f238-0ba5-4444-94aa-a779d427c2d1","ActionName":"PaymentGateWayService.Controllers.PaymentController.Post (PaymentGateWayService)","RequestId":"0HMTLETEKN76D:00000003","RequestPath":"/api/payment","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:34.6720150Z","@mt":"An unexpected error occurred.","@l":"Error","@x":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()\n   at PaymentGateWay.Infrastructure.Persistence.PaymentRepository.CreatePayment(PaymentRequest request) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWay.Infrastructure/Persistence/PaymentRepository.cs:line 26\n   at PaymentGateWay.Infrastructure.Services.PaymentService.CreatePayment(PaymentRequest request) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWay.Infrastructure/Services/PaymentService.cs:line 57\n   at PaymentGateWayService.Controllers.PaymentController.Post(PaymentRequest paymentRequest) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWayService/Controllers/PaymentController.cs:line 38","SourceContext":"PaymentGateWayService.Controllers.PaymentController","ActionId":"1167f238-0ba5-4444-94aa-a779d427c2d1","ActionName":"PaymentGateWayService.Controllers.PaymentController.Post (PaymentGateWayService)","RequestId":"0HMTLETEKN76D:00000003","RequestPath":"/api/payment","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:34.6741200Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["42.3083"],"RequestMethod":"POST","RequestPath":"/api/payment","StatusCode":200,"Elapsed":42.30825,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMTLETEKN76D:00000003","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:47.3361340Z","@mt":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","@l":"Error","@x":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)","contextType":"PaymentGateWay.Infrastructure.Contexts.ApplicationDbContext","newline":"\n","error":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"1167f238-0ba5-4444-94aa-a779d427c2d1","ActionName":"PaymentGateWayService.Controllers.PaymentController.Post (PaymentGateWayService)","RequestId":"0HMTLETEKN76D:00000004","RequestPath":"/api/payment","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:47.3394020Z","@mt":"An unexpected error occurred.","@l":"Error","@x":"System.ArgumentException: Couldn't set data source (Parameter 'data source')\n ---> System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedSetter(String keyword, Object value)\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   --- End of inner exception stack trace ---\n   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)\n   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)\n   at Npgsql.NpgsqlConnection.SetupDataSource()\n   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)\n   at Npgsql.NpgsqlConnection..ctor(String connectionString)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()\n   at PaymentGateWay.Infrastructure.Persistence.PaymentRepository.CreatePayment(PaymentRequest request) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWay.Infrastructure/Persistence/PaymentRepository.cs:line 26\n   at PaymentGateWay.Infrastructure.Services.PaymentService.CreatePayment(PaymentRequest request) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWay.Infrastructure/Services/PaymentService.cs:line 57\n   at PaymentGateWayService.Controllers.PaymentController.Post(PaymentRequest paymentRequest) in /Users/kursat.arslan/Documents/Projects/Checkout/PaymentGateWayService/Controllers/PaymentController.cs:line 38","SourceContext":"PaymentGateWayService.Controllers.PaymentController","ActionId":"1167f238-0ba5-4444-94aa-a779d427c2d1","ActionName":"PaymentGateWayService.Controllers.PaymentController.Post (PaymentGateWayService)","RequestId":"0HMTLETEKN76D:00000004","RequestPath":"/api/payment","ConnectionId":"0HMTLETEKN76D"}
{"@t":"2023-09-14T23:07:47.3409750Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["19.9169"],"RequestMethod":"POST","RequestPath":"/api/payment","StatusCode":200,"Elapsed":19.916917,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMTLETEKN76D:00000004","ConnectionId":"0HMTLETEKN76D"}
